import{a as r,R as e}from"./react-DiaKWkc7.js";import{R as $}from"./react-dom-DXyHqHJV.js";import{y as C,L as Y}from"./react-toastify-BbIke1Ak.js";import{i as B,g as M,a as G,o as W,b as k,d as N,G as U,s as z,c as R,e as K,f as J,h as Z,j as L,k as S,l as O,u as A,m as Q,n as V,p as X,q as _,w as ee,t as te}from"./@firebase-DA_1yTx_.js";import"./firebase-BpvMfQYA.js";import{u as j,L as w,N as I,O as ae,R as se,a as h,B as ne}from"./react-router-CkRnZUiS.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./clsx-B-dksMZM.js";import"./tslib-BGVaTf34.js";import"./idb-BXWtuYvb.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))x(l);new MutationObserver(l=>{for(const t of l)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&x(i)}).observe(document,{childList:!0,subtree:!0});function d(l){const t={};return l.integrity&&(t.integrity=l.integrity),l.referrerPolicy&&(t.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?t.credentials="include":l.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function x(l){if(l.ep)return;l.ep=!0;const t=d(l);fetch(l.href,t)}})();const re={apiKey:"AIzaSyBWHkhs8MOFlshkJ0yoT9mLMIFWLbgZDuo",authDomain:"fyp-supervisor-finder-44bce.firebaseapp.com",projectId:"fyp-supervisor-finder-44bce",storageBucket:"fyp-supervisor-finder-44bce.firebasestorage.app",messagingSenderId:"852079329187",appId:"1:852079329187:web:28f2603e534546ffa4e416"},q=B(re),F=M(q),E=G(q),H=r.createContext();function le({children:a}){const[o,d]=r.useState(null),[x,l]=r.useState(null),[t,i]=r.useState(!0);r.useEffect(()=>W(F,async u=>{if(d(u),u){const p=await k(N(E,"users",u.uid));l(p.exists()?p.data().role:null)}else l(null);i(!1)}),[]);const g=async(b,u,p,n)=>{const c=await Z(F,b,u);await R(N(E,"users",c.user.uid),{role:p,username:n,email:b}),C.success("Account created")},s=async(b,u)=>{await J(F,b,u),C.success("Logged in")},m=()=>{K(F),C.info("Logged out")},f=async b=>{const u=new U,p=await z(F,u),n=N(E,"users",p.user.uid);(await k(n)).exists()||await R(n,{role:b,username:p.user.displayName||"",email:p.user.email}),C.success("Signed in with Google")};return e.createElement(H.Provider,{value:{user:o,role:x,loading:t,signup:g,login:s,logout:m,signInWithGoogle:f}},a)}function D(){return r.useContext(H)}function oe(){const[a,o]=r.useState("admin"),[d,x]=r.useState(""),[l,t]=r.useState(""),{user:i,role:g,login:s,signInWithGoogle:m,loading:f}=D(),b=j();r.useEffect(()=>{f||(i&&g==="admin"&&b("/admin/dashboard",{replace:!0}),i&&g==="student"&&b("/student/browse",{replace:!0}))},[i,g,f,b]);const u=async p=>{p.preventDefault();try{await s(d,l)}catch(n){C.error(n.message)}};return f?e.createElement("div",{className:"text-center py-10"},"Checking login status..."):e.createElement("div",{className:"flex justify-center items-center min-h-[80vh]"},e.createElement("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md p-6"},e.createElement("h2",{className:"text-2xl font-bold text-center mb-4"},"FYP Supervisor Finder"),e.createElement("div",{className:"flex border-b border-gray-200 mb-6"},e.createElement("button",{onClick:()=>o("admin"),className:`w-1/2 text-center py-2 font-semibold ${a==="admin"?"border-b-4 border-orange-500 text-orange-500":"text-gray-500"}`},"Login as Admin/Faculty"),e.createElement("button",{onClick:()=>o("student"),className:`w-1/2 text-center py-2 font-semibold ${a==="student"?"border-b-4 border-orange-500 text-orange-500":"text-gray-500"}`},"Login as Student")),e.createElement("form",{onSubmit:u,className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Email Address"),e.createElement("input",{type:"email",required:!0,value:d,onChange:p=>x(p.target.value),className:"mt-1 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400",placeholder:"Enter your email"})),e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Password"),e.createElement("input",{type:"password",required:!0,value:l,onChange:p=>t(p.target.value),className:"mt-1 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400",placeholder:"Enter your password"})),e.createElement("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg font-semibold"},"Login")),e.createElement("div",{className:"mt-4 text-center"},e.createElement("span",{className:"text-gray-600 mr-2"},"Or login with"),e.createElement("button",{onClick:()=>m(a),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold"},"Google")),e.createElement("p",{className:"mt-6 text-center text-gray-600"},"Don't have an account?"," ",e.createElement("a",{href:"/signup",className:"text-orange-500 hover:underline"},"Signup now"))))}function ce(){const[a,o]=r.useState("admin"),[d,x]=r.useState(""),[l,t]=r.useState(""),[i,g]=r.useState(""),[s,m]=r.useState(""),{user:f,role:b,signup:u,signInWithGoogle:p,loading:n}=D(),c=j();r.useEffect(()=>{n||(f&&b==="admin"&&c("/admin/dashboard",{replace:!0}),f&&b==="student"&&c("/student/browse",{replace:!0}))},[f,b,n,c]);const y=async v=>{if(v.preventDefault(),i!==s){C.error("Passwords do not match.");return}try{await u(l,i,a,d)}catch(T){C.error(T.message)}};return n?e.createElement("div",{className:"text-center py-10"},"Checking signup status..."):e.createElement("div",{className:"flex justify-center items-center min-h-[80vh]"},e.createElement("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md p-6"},e.createElement("h2",{className:"text-2xl font-bold text-center mb-4"},"FYP Supervisor Finder"),e.createElement("div",{className:"flex border-b border-gray-200 mb-6"},e.createElement("button",{onClick:()=>o("admin"),className:`w-1/2 text-center py-2 font-semibold ${a==="admin"?"border-b-4 border-orange-500 text-orange-500":"text-gray-500"}`},"Signup as Admin/Faculty"),e.createElement("button",{onClick:()=>o("student"),className:`w-1/2 text-center py-2 font-semibold ${a==="student"?"border-b-4 border-orange-500 text-orange-500":"text-gray-500"}`},"Signup as Student")),e.createElement("form",{onSubmit:y,className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Username"),e.createElement("input",{type:"text",required:!0,value:d,onChange:v=>x(v.target.value),className:"mt-1 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400",placeholder:"Enter your name"})),e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Email Address"),e.createElement("input",{type:"email",required:!0,value:l,onChange:v=>t(v.target.value),className:"mt-1 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400",placeholder:"Enter your email"})),e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Password"),e.createElement("input",{type:"password",required:!0,value:i,onChange:v=>g(v.target.value),className:"mt-1 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400",placeholder:"Enter password"})),e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Confirm Password"),e.createElement("input",{type:"password",required:!0,value:s,onChange:v=>m(v.target.value),className:"mt-1 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400",placeholder:"Confirm password"})),e.createElement("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg font-semibold"},"Signup")),e.createElement("div",{className:"mt-4 text-center"},e.createElement("span",{className:"text-gray-600 mr-2"},"Or signup with"),e.createElement("button",{onClick:()=>p(a),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold"},"Google")),e.createElement("p",{className:"mt-6 text-center text-gray-600"},"Already have an account?"," ",e.createElement("a",{href:"/login",className:"text-orange-500 hover:underline"},"Login now"))))}function ie(){const[a,o]=r.useState([]),[d,x]=r.useState([]);r.useEffect(()=>{const s=[L(S(E,"faculty"),m=>o(m.docs.map(f=>({id:f.id,...f.data()})))),L(S(E,"submissions"),m=>x(m.docs.map(f=>({id:f.id,...f.data()}))))];return()=>s.forEach(m=>m())},[]);const l=r.useMemo(()=>{const s=a.length,m=d.length,f=d.filter(u=>u.status==="Accepted").length,b=a.reduce((u,p)=>u+p.slots,0);return{totalFaculty:s,totalSub:m,totalAccepted:f,totalSlotsLeft:b}},[a,d]),t=a.slice(-3).reverse(),i=d.slice(-3).reverse(),g=s=>{switch(s){case"Pending":return"bg-yellow-100 text-yellow-800";case"Accepted":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";case"Revision":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return e.createElement("div",{className:"space-y-8"},e.createElement("h1",{className:"text-3xl font-bold text-gray-800"},"Admin Dashboard"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"},e.createElement("div",{className:"bg-white p-6 rounded-2xl shadow-lg"},e.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Total Faculty"),e.createElement("p",{className:"mt-2 text-3xl font-bold text-orange-500"},l.totalFaculty)),e.createElement("div",{className:"bg-white p-6 rounded-2xl shadow-lg"},e.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Ideas Submitted"),e.createElement("p",{className:"mt-2 text-3xl font-bold text-orange-500"},l.totalSub)),e.createElement("div",{className:"bg-white p-6 rounded-2xl shadow-lg"},e.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Assigned Students"),e.createElement("p",{className:"mt-2 text-3xl font-bold text-orange-500"},l.totalAccepted)),e.createElement("div",{className:"bg-white p-6 rounded-2xl shadow-lg"},e.createElement("h3",{className:"text-sm font-medium text-gray-500"},"Slots Available"),e.createElement("p",{className:"mt-2 text-3xl font-bold text-orange-500"},l.totalSlotsLeft))),e.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},e.createElement("div",{className:"bg-white p-6 rounded-2xl shadow-lg"},e.createElement("h3",{className:"text-xl font-semibold text-gray-700 mb-4"},"Recently Added"),e.createElement("ul",{className:"divide-y divide-gray-200"},t.map(s=>e.createElement("li",{key:s.id,className:"py-3 flex justify-between items-center"},e.createElement("div",null,e.createElement("p",{className:"text-gray-800 font-medium"},s.name),e.createElement("p",{className:"text-gray-500 text-sm"},s.domain)),e.createElement("p",{className:"text-sm text-gray-600"},"Slots: ",s.slots))))),e.createElement("div",{className:"bg-white p-6 rounded-2xl shadow-lg"},e.createElement("h3",{className:"text-xl font-semibold text-gray-700 mb-4"},"Recent Submissions"),e.createElement("ul",{className:"divide-y divide-gray-200"},i.map(s=>{var m;return e.createElement("li",{key:s.id,className:"py-3"},e.createElement("div",{className:"flex justify-between items-center"},e.createElement("div",null,e.createElement("p",{className:"text-gray-800 font-medium"},s.groupName),e.createElement("p",{className:"text-gray-500 text-sm"},s.title)),e.createElement("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${g(s.status)}`},s.status)),e.createElement("p",{className:"mt-1 text-gray-500 text-xs"},((m=s.timestamp)==null?void 0:m.toDate().toLocaleString())||""))})))),e.createElement("div",{className:"bg-white p-6 rounded-2xl shadow-lg overflow-x-auto"},e.createElement("h3",{className:"text-xl font-semibold text-gray-700 mb-4"},"Slot Availability"),e.createElement("table",{className:"w-full text-left"},e.createElement("thead",{className:"bg-gray-50"},e.createElement("tr",null,e.createElement("th",{className:"px-4 py-2 text-gray-600 text-sm"},"Name"),e.createElement("th",{className:"px-4 py-2 text-gray-600 text-sm"},"Domain"),e.createElement("th",{className:"px-4 py-2 text-gray-600 text-sm"},"Office Hours"),e.createElement("th",{className:"px-4 py-2 text-gray-600 text-sm"},"Slots Left"))),e.createElement("tbody",{className:"divide-y divide-gray-200"},a.map(s=>e.createElement("tr",{key:s.id,className:"hover:bg-gray-50"},e.createElement("td",{className:"px-4 py-3 text-gray-700"},s.name),e.createElement("td",{className:"px-4 py-3 text-gray-600"},s.domain),e.createElement("td",{className:"px-4 py-3 text-gray-600"},s.officeHours),e.createElement("td",{className:"px-4 py-3 text-gray-800 font-medium"},s.slots)))))))}function me(){const[a,o]=r.useState([]),[d,x]=r.useState(""),[l,t]=r.useState(""),[i,g]=r.useState(""),[s,m]=r.useState(""),[f,b]=r.useState("");r.useEffect(()=>{const c=L(S(E,"faculty"),y=>o(y.docs.map(v=>({id:v.id,...v.data()}))));return()=>c()},[]);const u=async()=>{!d||!l||!i||!s||(await O(S(E,"faculty"),{name:d,email:l,domain:i,slots:parseInt(s),officeHours:f,pictureURL:""}),x(""),t(""),g(""),m(""),b(""))},p=async(c,y,v)=>{await A(N(E,"faculty",c),{[y]:y==="slots"?parseInt(v):v})},n=async c=>{await Q(N(E,"faculty",c))};return e.createElement("div",{className:"space-y-6"},e.createElement("h2",{className:"text-3xl font-bold text-gray-800"},"Faculty Management"),e.createElement("div",{className:"bg-white p-6 rounded-lg shadow-md space-y-4"},e.createElement("h3",{className:"text-2xl font-semibold text-gray-700"},"Add New Faculty"),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4"},e.createElement("input",{type:"text",placeholder:"Name",value:d,onChange:c=>x(c.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400"}),e.createElement("input",{type:"email",placeholder:"Email",value:l,onChange:c=>t(c.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400"}),e.createElement("input",{type:"text",placeholder:"Domain",value:i,onChange:c=>g(c.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400"}),e.createElement("input",{type:"number",placeholder:"Slots",value:s,onChange:c=>m(c.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400"}),e.createElement("input",{type:"text",placeholder:"Office Hours",value:f,onChange:c=>b(c.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400"}),e.createElement("button",{onClick:u,className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg font-semibold col-span-2"},"Add Faculty"))),e.createElement("div",{className:"space-y-4"},a.map(c=>e.createElement("div",{key:c.id,className:"bg-white p-6 rounded-lg shadow-md grid grid-cols-1 md:grid-cols-4 gap-4 items-center"},e.createElement("div",{className:"md:col-span-1 space-y-1"},e.createElement("p",{className:"text-lg font-medium text-gray-700"},c.name),e.createElement("p",{className:"text-gray-600 text-sm"},c.email)),e.createElement("div",{className:"space-y-2"},e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Domain"),e.createElement("input",{type:"text",value:c.domain,onChange:y=>p(c.id,"domain",y.target.value),className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400"})),e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Office Hours"),e.createElement("input",{type:"text",value:c.officeHours,onChange:y=>p(c.id,"officeHours",y.target.value),className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400"})),e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Slots"),e.createElement("input",{type:"number",value:c.slots,onChange:y=>p(c.id,"slots",y.target.value),className:"mt-1 w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400"}))),e.createElement("button",{onClick:()=>n(c.id),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold"},"Delete")))))}function ue(){const[a,o]=r.useState([]);r.useEffect(()=>{const t=L(S(E,"submissions"),i=>o(i.docs.map(g=>({id:g.id,...g.data()}))));return()=>t()},[]);const d=async(t,i)=>{const g=a.find(s=>s.id===t);await A(N(E,"submissions",t),{status:i,comment:i==="Revision"&&g.comment||""})},x=async(t,i)=>{await A(N(E,"submissions",t),{comment:i}),o(g=>g.map(s=>s.id===t?{...s,comment:i}:s))},l=t=>{switch(t){case"Accepted":return"bg-green-100 text-green-800";case"Rejected":return"bg-red-100 text-red-800";case"Revision":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return e.createElement("div",{className:"space-y-6"},e.createElement("h2",{className:"text-3xl font-bold text-gray-800"},"Submissions"),e.createElement("div",{className:"space-y-4"},a.map(t=>e.createElement("div",{key:t.id,className:"bg-white p-6 rounded-lg shadow space-y-4"},e.createElement("div",{className:"flex justify-between items-center"},e.createElement("div",null,e.createElement("p",{className:"text-lg font-semibold text-gray-800"},t.groupName," — ",t.title),e.createElement("p",{className:"text-gray-600"},"Supervisor: ",t.supervisorName)),e.createElement("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l(t.status)}`},t.status)),e.createElement("p",{className:"text-gray-700"},t.description),t.status==="Revision"&&e.createElement("div",null,e.createElement("label",{className:"block text-gray-700 mb-1"},"Comment:"),e.createElement("textarea",{className:"w-full px-3 py-2 border rounded",value:t.comment||"",onChange:i=>x(t.id,i.target.value)})),e.createElement("div",{className:"flex gap-4"},e.createElement("button",{onClick:()=>d(t.id,"Accepted"),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded"},"Accept"),e.createElement("button",{onClick:()=>d(t.id,"Rejected"),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded"},"Reject"),e.createElement("button",{onClick:()=>d(t.id,"Revision"),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded"},"Ask Revision"))))))}function de(){const{user:a}=D(),[o,d]=r.useState([]),[x,l]=r.useState(null),[t,i]=r.useState(""),[g,s]=r.useState(""),[m,f]=r.useState("");r.useEffect(()=>{const n=L(S(E,"faculty"),c=>d(c.docs.map(y=>({id:y.id,...y.data()}))));return()=>n()},[]),r.useEffect(()=>{if(!a)return;(async()=>{const c=N(E,"students",a.uid),y=await k(c);y.exists()&&l(y.data().selectedSupervisorID||null)})()},[a]);const b=o.filter(n=>(t===""||n.domain.toLowerCase().includes(t.toLowerCase()))&&(m===""||n.officeHours.toLowerCase().includes(m.toLowerCase()))&&(g===""||n.slots>=parseInt(g))),u=async n=>{if(x){alert("You’ve already selected a supervisor. Unselect first.");return}await R(N(E,"students",a.uid),{selectedSupervisorID:n},{merge:!0}),l(n),alert("Supervisor reserved! Now submit your idea.")},p=async()=>{if(!x)return;if((await k(N(E,"submissions",a.uid))).exists()){alert("You cannot unselect a supervisor after idea submission.");return}await R(N(E,"students",a.uid),{selectedSupervisorID:null},{merge:!0}),l(null),alert("Supervisor unselected.")};return e.createElement("div",{className:"space-y-6"},e.createElement("h2",{className:"text-3xl font-bold text-gray-800"},"Browse Supervisors"),e.createElement("div",{className:"bg-white p-6 rounded-lg shadow-md grid grid-cols-1 sm:grid-cols-3 gap-4"},e.createElement("input",{type:"text",placeholder:"Filter by Domain",value:t,onChange:n=>i(n.target.value),className:"px-4 py-2 border rounded-lg"}),e.createElement("input",{type:"number",placeholder:"Min Slots",value:g,onChange:n=>s(n.target.value),className:"px-4 py-2 border rounded-lg"}),e.createElement("input",{type:"text",placeholder:"Filter by Office Hours",value:m,onChange:n=>f(n.target.value),className:"px-4 py-2 border rounded-lg"})),x&&e.createElement("div",{className:"text-center"},e.createElement("p",{className:"text-gray-700 mb-2"},"You’ve selected a supervisor. Please unselect before choosing another."),e.createElement("button",{onClick:p,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold"},"Unselect Supervisor")),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},b.map(n=>e.createElement("div",{key:n.id,className:"bg-white p-6 rounded-2xl shadow-md space-y-4"},e.createElement("p",{className:"text-xl font-semibold text-gray-700"},n.name),e.createElement("p",{className:"text-gray-600"},"Domain: ",n.domain),e.createElement("p",{className:"text-gray-600"},"Slots: ",n.slots),e.createElement("p",{className:"text-gray-600"},"Office Hours: ",n.officeHours),e.createElement("button",{disabled:n.slots===0||x!==null,onClick:()=>u(n.id),className:`w-full py-2 rounded-lg font-semibold text-white ${n.slots===0||x!==null?"bg-gray-400 cursor-not-allowed":"bg-orange-500 hover:bg-orange-600"}`},n.slots===0?"Full":x===n.id?"Selected":"Select")))))}function ge(){const{user:a}=D(),[o,d]=r.useState([]),[x,l]=r.useState(!1),[t,i]=r.useState(""),[g,s]=r.useState(""),[m,f]=r.useState("");r.useEffect(()=>{(async()=>{if(!a)return;const p=N(E,"students",a.uid),n=await k(p);if(!n.exists())return;const c=n.data().selectedSupervisorID;if(!c)return;const y=await k(N(E,"faculty",c));if(y.exists()){const v={id:y.id,...y.data()};d([v]),f(v.id)}})()},[a]);const b=async u=>{if(u.preventDefault(),x)return;const p=await k(N(E,"faculty",m)),n=p.exists()?p.data().name:"";await O(S(E,"submissions"),{groupName:a.email,title:t,description:g,supervisorID:m,supervisorName:n,studentID:a.uid,status:"Pending",comment:"",timestamp:X(),revisionDeadline:""}),await A(N(E,"faculty",m),{slots:V(-1)}),l(!0)};return x?e.createElement("div",{className:"text-center py-20"},e.createElement("h2",{className:"text-3xl font-bold text-green-600 mb-4"},"Idea Submitted Successfully!"),e.createElement("p",{className:"text-gray-700"},"You can track its status under “Track Status.”")):e.createElement("div",{className:"max-w-lg mx-auto bg-white p-6 rounded-lg shadow-md space-y-6"},e.createElement("h2",{className:"text-3xl font-bold text-gray-800"},"Submit FYP Idea"),e.createElement("form",{onSubmit:b,className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Project Title"),e.createElement("input",{type:"text",required:!0,value:t,onChange:u=>i(u.target.value),className:"mt-1 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400",placeholder:"Enter project title"})),e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Project Description"),e.createElement("textarea",{rows:4,required:!0,value:g,onChange:u=>s(u.target.value),className:"mt-1 w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-400",placeholder:"Describe your project"})),e.createElement("div",null,e.createElement("label",{className:"block text-gray-700"},"Selected Supervisor"),e.createElement("select",{required:!0,value:m,disabled:!0,className:"mt-1 w-full px-4 py-2 border rounded-lg bg-gray-100"},o.map(u=>e.createElement("option",{key:u.id,value:u.id},u.name)))),e.createElement("button",{type:"submit",className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-2 rounded-lg font-semibold"},"Submit Idea")))}function pe(){var g;const{user:a}=D(),[o,d]=r.useState(null),[x,l]=r.useState("");r.useEffect(()=>{async function s(){const m=_(S(E,"submissions"),ee("studentID","==",a.uid)),f=await te(m);f.empty||d({id:f.docs[0].id,...f.docs[0].data()})}a&&s()},[a]);const t=async()=>{await A(N(E,"submissions",o.id),{status:"In Review"})},i=s=>{const m=s.target.files[0];m&&l(m.name)};return o?e.createElement("div",{className:"space-y-10"},e.createElement("h1",{className:"text-3xl font-bold text-gray-800"},"Track Idea Status"),e.createElement("div",{className:"bg-white p-6 rounded-lg shadow space-y-4"},e.createElement("h2",{className:"text-2xl font-semibold"},o.title),e.createElement("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4"},e.createElement("div",null,e.createElement("p",{className:"text-gray-500"},"Supervisor"),e.createElement("p",{className:"font-medium"},o.supervisorName)),e.createElement("div",null,e.createElement("p",{className:"text-gray-500"},"Submitted On"),e.createElement("p",{className:"font-medium"},(g=o.timestamp)==null?void 0:g.toDate().toLocaleString())),e.createElement("div",null,e.createElement("p",{className:"text-gray-500"},"Deadline"),e.createElement("p",{className:"font-medium"},o.revisionDeadline||"—")))),e.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},e.createElement("h3",{className:"font-semibold text-gray-800 mb-6"},"Status"),e.createElement("div",{className:"text-center"},e.createElement("span",{className:`inline-block px-4 py-2 rounded-full text-sm font-medium 
            ${o.status==="Accepted"?"bg-green-100 text-green-800":""}
            ${o.status==="Rejected"?"bg-red-100 text-red-800":""}
            ${o.status==="Revision"?"bg-orange-100 text-orange-800":""}
            ${o.status==="In Review"?"bg-blue-100 text-blue-800":""}
            ${o.status==="Pending"?"bg-gray-100 text-gray-800":""}`},"Current Status: ",o.status))),o.status==="Revision"&&e.createElement("div",{className:"bg-orange-50 border-l-4 border-orange-500 p-6 rounded-lg space-y-4"},e.createElement("h3",{className:"text-lg font-semibold text-gray-800"},"Revision Required"),e.createElement("p",{className:"text-gray-700"},"Comment: ",o.comment||"No comment provided"),e.createElement("div",{className:"space-y-2"},e.createElement("label",{className:"block font-medium text-gray-700"},"Upload Revised File"),e.createElement("input",{type:"file",onChange:i}),x&&e.createElement("p",{className:"text-sm text-gray-600 italic"},x),e.createElement("button",{onClick:t,className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg mt-4"},"Submit Revision")))):e.createElement("p",null,"Loading...")}function xe(){const{role:a,logout:o}=D(),d=()=>{window.confirm("Are you sure you want to log out?")&&o()};return e.createElement("nav",{className:"bg-zinc-950 text-white shadow-sm border-b border-zinc-800"},e.createElement("div",{className:"max-w-7xl mx-auto px-4 py-3 flex justify-between items-center"},e.createElement(w,{to:a==="admin"?"/admin/dashboard":a==="student"?"/student/browse":"/login",className:"text-2xl font-extrabold tracking-wide text-orange-400 hover:text-white transition"},"FYP Supervisor Finder"),e.createElement("div",{className:"flex items-center gap-8"},a==="admin"&&e.createElement("ul",{className:"flex gap-6 text-sm font-medium"},e.createElement("li",null,e.createElement(w,{to:"/admin/dashboard",className:"hover:text-orange-400 transition"},"Dashboard")),e.createElement("li",null,e.createElement(w,{to:"/admin/faculty",className:"hover:text-orange-400 transition"},"Faculty Management")),e.createElement("li",null,e.createElement(w,{to:"/admin/submissions",className:"hover:text-orange-400 transition"},"Submissions"))),a==="student"&&e.createElement("ul",{className:"flex gap-6 text-sm font-medium"},e.createElement("li",null,e.createElement(w,{to:"/student/browse",className:"hover:text-orange-400 transition"},"Browse Supervisors")),e.createElement("li",null,e.createElement(w,{to:"/student/submit",className:"hover:text-orange-400 transition"},"Submit Idea")),e.createElement("li",null,e.createElement(w,{to:"/student/track",className:"hover:text-orange-400 transition"},"Track Status"))),!a&&e.createElement("ul",{className:"flex gap-6 text-sm font-medium"},e.createElement("li",null,e.createElement(w,{to:"/login",className:"hover:text-orange-400 transition"},"Login")),e.createElement("li",null,e.createElement(w,{to:"/signup",className:"hover:text-orange-400 transition"},"Signup"))),a&&e.createElement("button",{onClick:d,className:"ml-4 text-sm bg-orange-500 hover:bg-orange-600 text-white px-4 py-1.5 rounded-md transition font-medium"},"Logout"))))}function fe(){const a=new Date().getFullYear();return e.createElement("footer",{className:"bg-zinc-950 text-gray-400 text-sm px-4 md:px-10 py-4 border-t border-zinc-800"},e.createElement("div",{className:"max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-between gap-4"},e.createElement("p",{className:"text-xs sm:text-sm"},"© ",a," FYP Supervisor Finder"),e.createElement("div",{className:"flex gap-4 text-xs sm:text-sm"},e.createElement("a",{href:"#",className:"hover:text-white"},"Privacy Policy"),e.createElement("a",{href:"#",className:"hover:text-white"},"Terms"),e.createElement("a",{href:"#",className:"hover:text-white"},"Contact Us"))))}function P({requiredRole:a}){const{role:o}=D();return o?o!==a?e.createElement(I,{to:"/login",replace:!0}):e.createElement(ae,null):e.createElement(I,{to:"/login",replace:!0})}function be(){return e.createElement("div",{className:"flex flex-col min-h-screen"},e.createElement(xe,null),e.createElement("div",{className:"flex-grow container mx-auto px-4 py-6 pb-24"},e.createElement(se,null,e.createElement(h,{path:"/",element:e.createElement(I,{to:"/login",replace:!0})}),e.createElement(h,{path:"/login",element:e.createElement(oe,null)}),e.createElement(h,{path:"/signup",element:e.createElement(ce,null)}),e.createElement(h,{element:e.createElement(P,{requiredRole:"admin"})},e.createElement(h,{path:"/admin/dashboard",element:e.createElement(ie,null)}),e.createElement(h,{path:"/admin/faculty",element:e.createElement(me,null)}),e.createElement(h,{path:"/admin/submissions",element:e.createElement(ue,null)})),e.createElement(h,{element:e.createElement(P,{requiredRole:"student"})},e.createElement(h,{path:"/student/browse",element:e.createElement(de,null)}),e.createElement(h,{path:"/student/submit",element:e.createElement(ge,null)}),e.createElement(h,{path:"/student/track",element:e.createElement(pe,null)})),e.createElement(h,{path:"*",element:e.createElement("div",{className:"text-center text-red-500"},"404 Page Not Found")}))),e.createElement(fe,null),e.createElement(Y,{position:"bottom-right",autoClose:3e3}))}$.createRoot(document.getElementById("root")).render(e.createElement(e.StrictMode,null,e.createElement(ne,null,e.createElement(le,null,e.createElement(be,null)))));
